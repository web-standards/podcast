# Подготовка эпизода

1. Создайте новый эпизод, где `N` — номер эпизода:

	```sh
	npm run new N
	```

	На основе шаблонов [index.yml](src/templates/index.yml) и [index.md](src/templates/index.yml) в папке `src/episodes/N` появятся файлы эпизода.

	Файл `index.yml` для метаданных, файл `index.md` для ссылок из сценария.

2. Обновите метаданные в файле `index.yml`:

	- Удалите ведущих, которые не участвовали в эпизоде.
	- Поменяйте порядок ведущих на основе обложки.

3. Добавьте ссылки в файл `index.md` на основе сценария эпизода:

	- Добавьте ссылку на лайв.
	- Скопируйте ссылки из сценария.

4. Экспортируйте WAV-файл эпизода с именем `N.wav` в папку `src/wav`.

	Файл должен быть размечен маркерами глав.

5. Запустите скрипт генерации MP3 и описания эпизода:

	```sh
	npm run wav N
	```

	- В папке `src/mp3` появится MP3-файл эпизода.
	- В файле `index.yml` обновится длительность эпизода.
	- На основе шаблона [index.txt](src/templates/index.txt) в папке `src/episodes/N` появится черновик эпизода.

6. Отредактируйте черновик эпизода в файле `index.txt`:

	- Разверните название глав.
	- Соберите название эпизода (до 100 символов, включая номер эпизода).
	- Заполните оставшиеся поля.

7. Заполните метаданные в файле `index.yml`

	- Скопируйте название эпизода из файла `index.txt` без номера.
	- Скопирутей названия глав из файла `index.txt`.

8. Обновите ссылки в файле `index.md`:

	- Скопируте главы и замените таймкоды на заголовки второго уровня.
	- Разделите ссылки на секции с заголовками.

9. Запишите метаданные в MP3-файл:

	```sh
	npm run mp3 N
	```

	Данные из файла `index.yml`, а также обложка `src/cover.png` будут записаны в MP3-файл.

10. Закомитьте и запушьте изменения:

	```sh
	git commit -m "Добавляет N-й"
	git push
	```

11. Соберите и задеплойте сайт фид:

	```sh
	npm run build
	```

	Соберёт `index.xml` и `latest.xml` в `dist`.

	```sh
	npm run deploy
	```

	Задеплоит следующие файлы:

	- `src/mp3/N.mp3` в `/podcast/episodes/`
	- `src/cover.png` в `/podcast/`
	- `index.xml` и `latest.xml` в `/podcast/feed/`

12. Запустите сборку сайта в [web-standards/web-standards.ru](https://github.com/web-standards/web-standards.ru)

	```sh
	gh workflow run deploy
	```
